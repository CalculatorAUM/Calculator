<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ê–£–ú</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

<style>
/* –ò—Å–ø–æ–ª—å–∑—É–µ–º :root –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, —á—Ç–æ–±—ã –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ */
:root {
    --bg: #0b0f1a;
    --panel: #12172a;
    --text: #e5e7eb;
    --muted: #9ca3af;
    --accent: #6366f1;
    --border: #1f2937;
    --input: #0f172a;
}

/* –ö–ª–∞—Å—Å light –≤–µ—à–∞–µ–º –Ω–∞ html, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –¥–ª—è –≤—Å–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ */
html.light {
    --bg: #f3f4f6;
    --panel: #ffffff;
    --text: #111827;
    --muted: #6b7280;
    --accent: #4f46e5;
    --border: #e5e7eb;
    --input: #f9fafb;
}

* {
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
}

body {
    margin: 0;
    font-family: Inter, system-ui, sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
    /* –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ —Ü–≤–µ—Ç–∞ —Ñ–æ–Ω–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ç–µ–º—ã */
    transition: background-color 0.3s ease, color 0.3s ease;
}

.wrapper {
    width: 100%;
    max-width: 420px; 
    background: var(--panel);
    border-radius: 16px;
    padding: 28px;
    box-shadow: 0 30px 60px rgba(0,0,0,0.35);
    transition: background-color 0.3s ease;
}

.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 22px;
}

h1 {
    font-size: 18px;
    font-weight: 600;
    margin: 0;
}

.theme-toggle {
    border: 1px solid var(--border);
    background: transparent;
    color: var(--text);
    /* –£–≤–µ–ª–∏—á–µ–Ω–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –¥–ª—è –ø–∞–ª—å—Ü–∞ */
    padding: 8px 12px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px; /* –ß—É—Ç—å –∫—Ä—É–ø–Ω–µ–µ –∏–∫–æ–Ω–∫–∏ */
    transition: all 0.2s;
    /* –ß—Ç–æ–±—ã –∫–Ω–æ–ø–∫–∞ –Ω–µ —Å–∂–∏–º–∞–ª–∞—Å—å */
    flex-shrink: 0;
}

.theme-toggle:active {
    transform: scale(0.92);
    background: rgba(255,255,255,0.05);
}

.field {
    margin-bottom: 14px;
}

label {
    display: block;
    font-size: 13px;
    color: var(--muted);
    margin-bottom: 6px;
}

input {
    width: 100%;
    padding: 11px 12px;
    border-radius: 10px;
    border: 1px solid var(--border);
    background: var(--input);
    color: var(--text);
    font-size: 14px;
    transition: border-color 0.2s, background-color 0.3s;
    -webkit-appearance: none;
    appearance: none;
}

input:focus {
    outline: none;
    border-color: var(--accent);
}

button.calculate {
    width: 100%;
    margin-top: 8px;
    padding: 14px;
    border-radius: 12px;
    border: none;
    background: var(--accent);
    color: white;
    font-weight: 500;
    font-size: 15px;
    cursor: pointer;
    transition: opacity 0.2s;
}

button.calculate:hover {
    opacity: 0.9;
}

button.calculate:active {
    transform: scale(0.98);
}

.result {
    margin-top: 18px;
    padding: 14px;
    border-radius: 12px;
    border: 1px solid var(--border);
    background: rgba(0,0,0,0.08);
}

.result-main {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 8px;
    word-break: break-all;
}

.result-row {
    font-size: 13px;
    color: var(--muted);
}

@media (max-width: 480px) {
    .wrapper {
        padding: 20px;
    }
    input {
        font-size: 16px; 
        padding: 12px;
    }
    body {
        align-items: flex-start;
        padding-top: 40px;
        padding-bottom: 40px;
    }
}
</style>
</head>
<body>

<div class="wrapper">
    <div class="header">
        <h1>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ê–£–ú</h1>
        <button class="theme-toggle" type="button" onclick="toggleTheme()">üåô / ‚òÄÔ∏è</button>
    </div>

    <div class="field">
        <label>–ê–£ –Ω–∞ –Ω–∞—á–∞–ª–æ –∫–≤–∞—Ä—Ç–∞–ª–∞</label>
        <input id="x0" type="number" inputmode="decimal" placeholder="0">
    </div>

    <div class="field">
        <label>–ü–ª–∞–Ω –Ω–∞ 1 –º–µ—Å—è—Ü</label>
        <input id="P1" type="number" inputmode="decimal" placeholder="0">
    </div>

    <div class="field">
        <label>–ü–ª–∞–Ω –Ω–∞ 2 –º–µ—Å—è—Ü</label>
        <input id="P2" type="number" inputmode="decimal" placeholder="0">
    </div>

    <div class="field">
        <label>–ü–ª–∞–Ω –Ω–∞ 3 –º–µ—Å—è—Ü</label>
        <input id="P3" type="number" inputmode="decimal" placeholder="0">
    </div>

    <button class="calculate" onclick="calculate()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>

    <div class="result" id="result" style="display:none;"></div>
</div>

<script>
    // –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –∫–ª–∞—Å—Å –Ω–∞ HTML (documentElement), –∞ –Ω–µ –Ω–∞ body
    // –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫—É –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –Ω–∞ –≤—Å–µ—Ö –º–æ–±–∏–ª—å–Ω—ã—Ö
    function toggleTheme() {
        document.documentElement.classList.toggle("light");
    }
    
    function calculate() {
        let x0 = parseFloat(document.getElementById("x0").value) || 0;
        let P1 = parseFloat(document.getElementById("P1").value) || 0;
        let P2 = parseFloat(document.getElementById("P2").value) || 0;
        let P3 = parseFloat(document.getElementById("P3").value) || 0;
        
        let resultDiv = document.getElementById("result");
        resultDiv.style.display = "block";

        if (!P1 || !P2 || !P3) {
            resultDiv.innerHTML = "–ü–ª–∞–Ω –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–≤–µ–Ω –Ω—É–ª—é";
            return;
        }
    
        let sumInv = (1/P1 + 1/P2 + 1/P3);
        let target = 100.001; 
        let x = (target/100 * 3 - x0 * sumInv) / sumInv;
    
        let q1 = (x0 + x) / P1 * 100;
        let q2 = (x0 + x) / P2 * 100;
        let q3 = (x0 + x) / P3 * 100;
        let S = (q1 + q2 + q3) / 3;
    
        resultDiv.innerHTML = `
            <div class="result-main">${x.toFixed(2)}</div>
            <div class="result-row">–ú–µ—Å—è—Ü 1: ${q1.toFixed(2)}%</div>
            <div class="result-row">–ú–µ—Å—è—Ü 2: ${q2.toFixed(2)}%</div>
            <div class="result-row">–ú–µ—Å—è—Ü 3: ${q3.toFixed(2)}%</div>
            <div class="result-row">–°—Ä–µ–¥–Ω–µ–µ: ${S.toFixed(3)}%</div>
        `;
    }
    
    document.querySelectorAll('input').forEach(input => {
        input.addEventListener('keydown', function(event) {
            if (event.key === "Enter") {
                event.preventDefault();
                calculate();
                document.activeElement.blur(); 
            }
        });
    });
</script>

</body>
</html>
